<div class="loans-container">
  <div class="card">
    <div class="card-header">
      <h2 class="card-title">Listado de Pr√©stamos</h2>
      <div class="card-tools">
        <div class="search-box">
          <i class="search-icon">üîç</i>
          <input type="text" [(ngModel)]="searchTerm" (input)="filterLoans()" 
                 placeholder="Buscar por libro, usuario o estado" class="search-input">
        </div>
        <a routerLink="/loans/add" class="add-button">
          <i class="plus-icon">+</i> Nuevo Pr√©stamo
        </a>
      </div>
    </div>

    <div class="card-body">
      <div *ngIf="isLoading" class="loading-state">
        <div class="spinner"></div>
        <span>Cargando pr√©stamos...</span>
      </div>
      
      <div *ngIf="errorMessage" class="error-state">
        <i class="error-icon">‚ö†Ô∏è</i>
        <span>{{ errorMessage }}</span>
      </div>

      <div *ngIf="!isLoading && filteredLoans.length > 0" class="table-responsive">
        <table class="loans-table">
          <thead>
            <tr>
              <th>Libro</th>
              <th>Usuario</th>
              <th>Fecha Pr√©stamo</th>
              <th>Fecha Devoluci√≥n</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let loan of filteredLoans">
              <td data-label="Libro">{{ getBookTitle(loan.prestamoLibroId) }}</td>
              <td data-label="Usuario">{{ getUserName(loan.prestamoUsuarioId) }}</td>
              <td data-label="Fecha Pr√©stamo">{{ loan.prestamosFechaInicial | date }}</td>
              <td data-label="Fecha Devoluci√≥n">{{ loan.prestamosFechaDevolucion | date }}</td>
              <td [class]="getEstadoText(loan.prestamoEstado).toLowerCase()">
                {{ getEstadoText(loan.prestamoEstado) }}
              </td>
              <td data-label="Acciones" class="actions">
                <button [routerLink]="['/prestamos/formulario', loan.prestamosID]" class="action-button edit">
                  <i class="edit-icon">‚úèÔ∏è</i>
                </button>
                <button (click)="deleteLoan(loan.prestamosID)" class="action-button delete">
                  <i class="delete-icon">üóëÔ∏è</i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div *ngIf="!isLoading && filteredLoans.length === 0" class="empty-state">
        <i class="empty-icon">üìö</i>
        <h3>No se encontraron pr√©stamos</h3>
        <p *ngIf="searchTerm">No hay resultados para "{{ searchTerm }}"</p>
        <a routerLink="/prestamos/formulario" class="add-button">Crear nuevo pr√©stamo</a>
      </div>
    </div>
  </div>
</div>